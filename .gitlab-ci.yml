# Definition der Pipeline-Stages
stages:
  - build   # Build-Phase: Projekt kompilieren / vorbereiten
  - test    # Test-Phase: Code prüfen / Linting
  - deploy  # Deployment-Phase: Website live stellen

# Globales Skript, das VOR jedem Job ausgeführt wird
# KORRIGIERT: Wir wechseln jetzt in den Haupt-Projektordner,
# wo die package.json und die index.html liegen (nicht mehr in /src)
before_script:
  - cd teilzeit-ausbildungsrechner

# Build-Job
build-job:
  stage: build
  script:
    # Das 'cd' ist jetzt im globalen before_script
    - echo "Building project from teilzeit-ausbildungsrechner/..."
    - echo "Simulating build..."
    - sleep 5
    - echo "Build complete."

# HTML-Linting
lint-html-job:
  stage: test
  script:
    - echo "Checking HTML in root for errors..."
    - sleep 5
    - echo "No HTML issues found."

# CSS-Linting
lint-css-job:
  stage: test
  script:
    - echo "Checking CSS in src/ for issues..."
    - sleep 5
    - echo "No CSS issues found."

# JavaScript-Linting
lint-js-job:
  stage: test
  script:
    - echo "Linting JavaScript code in src/..."
    - sleep 5
    - echo "No JS issues found."

# Deployment
deploy-job:
  stage: deploy
  environment: production
  script:
    - echo "Deploying simulated website..."
    - sleep 5
    - echo "Website successfully deployed to production."